(this["webpackJsonpreact-course-selfmade-project"]=this["webpackJsonpreact-course-selfmade-project"]||[]).push([[0],{124:function(e,t,n){e.exports={items:"ingredients-category_items__7Zb2N"}},126:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__AKixE"}},127:function(e,t,n){e.exports={content:"orders-list_content__3-TZw"}},139:function(e,t,n){},16:function(e,t,n){e.exports={burger_constructor:"burger-constructor_burger_constructor__jXyGp",elements:"burger-constructor_elements__1mnPz",total:"burger-constructor_total__2z4fk",cost:"burger-constructor_cost__3NqMY",text:"burger-constructor_text__1C_uq",noBuns:"burger-constructor_noBuns__3BH7a",noBunsTop:"burger-constructor_noBunsTop__w5Mru",noBunsBottom:"burger-constructor_noBunsBottom__1fruv",dragActive:"burger-constructor_dragActive__1YQQm",element:"burger-constructor_element__10R7L",element_fullwidth:"burger-constructor_element_fullwidth__28_mc"}},217:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(43),s=n.n(c),i=n(53),o=n(12),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,234)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},u=(n(139),n(35)),d=n(122),j=n(120),m=n(93),b=n.n(m),p=n(121),_=n(2);function O(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(n=Object(_.a)({path:"/"},n)).expires;if(a&&"number"===typeof a){var r=new Date;r.setTime(r.getTime()+1e3*a),a=n.expires=r}a&&a instanceof Date&&(n.expires=a.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c}var f="https://norma.nomoreparties.space/api",h=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},g=function(){return fetch("".concat(f,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return h(e)})).then((function(e){return e.success?(localStorage.setItem("refreshToken",e.refreshToken),x("accessToken",e.accessToken),e):Promise.reject(e)}))},y=function(){var e=Object(p.a)(b.a.mark((function e(t,n){var a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return a=e.sent,e.next=6,h(a);case 6:case 21:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=24;break}return e.next=14,g();case 14:return r=e.sent,n.headers&&(n.headers.authorization=r.accessToken),e.next=18,fetch(t,n);case 18:return c=e.sent,e.next=21,h(c);case 24:return e.abrupt("return",Promise.reject(e.t0));case 25:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e){return function(t){var n=null,a=e.wsInit,r=e.wsClose,c=e.wsSendMessage,s=e.onOpen,i=e.onClose,o=e.onError,l=e.onMessage;return function(e){return function(u){var d=t.dispatch,j=u.type,m=u.payload;j===a&&((n=new WebSocket(m)).onopen=function(e){d({type:s,payload:e})},n.onerror=function(e){d({type:o,payload:e})},n.onmessage=function(e){var t=e.data,n=JSON.parse(t);d({type:l,payload:{data:n,timestamp:(new Date).getTime()/100}})},n.onclose=function(e){d({type:i,payload:e})}),r&&j===r&&n&&n.close(),c&&j===c&&n&&n.send(JSON.stringify(m)),e(u)}}}},N="ORDERS_CONNECTION_INIT",E="ORDERS_CONNECTION_SUCCESS",C="ORDERS_CONNECTION_ERROR",T="ORDERS_CONNECTION_CLOSED",S="ORDERS_CONNECTION_CLOSE",R="ORDERS_GET_MESSAGE",w="FEED_CONNECTION_INIT",I="FEED_CONNECTION_SUCCESS",k="FEED_CONNECTION_ERROR",U="FEED_CONNECTION_CLOSED",D="FEED_CONNECTION_CLOSE",A="FEED_GET_MESSAGE",B="GET_INGREDIENTS_REQUEST",L="GET_INGREDIENTS_SUCCESS",P="GET_INGREDIENTS_FAILED",F=function(){return function(e){return e({type:B}),fetch("".concat(f,"/ingredients")).then((function(e){return h(e)})).then((function(e){return(null===e||void 0===e?void 0:e.success)?e.data:Promise.reject(e)})).then((function(t){e({type:L,payload:t})})).catch((function(t){e({type:P,payload:t})}))}},G={data:[],isLoading:!1,error:null},q=n(33),M=n(232),z="CONSTRUCTOR_ADD",J="CONSTRUCTOR_DELETE",H="CONSTRUCTOR_REORDER",Q="CONSTRUCTOR_RESET",W={bun:null,ingredients:[]},Y="CREATE_ORDER_REQUEST",V="CREATE_ORDER_SUCCESS",X="CREATE_ORDER_FAILED",K="RESET_CREATED_ORDER",Z="GET_ORDER_REQUEST",$="GET_ORDER_SUCCESS",ee="GET_ORDER_FAILED",te=function(e){return function(t){return t({type:Y}),(n=e,y("".concat(f,"/orders"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",authorization:O("accessToken")},body:JSON.stringify({ingredients:n})}).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(e){t({type:V,payload:e.order}),t({type:Q})})).catch((function(e){t({type:X,payload:e})}));var n}},ne=function(e){return function(t){return t({type:Z}),function(e){return fetch("".concat(f,"/orders/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return h(e)}))}(e).then((function(e){t({type:$,payload:e})})).catch((function(e){t({type:ee,payload:e})}))}},ae={newOrderData:null,isNewOrderLoading:!1,newOrderError:null,orderByNumber:null,isOrderByNumberLoading:!1,orderByNumberError:null},re={data:[],isOpen:!1,error:null},ce={orders:[],total:0,totalToday:0,isOpen:!1,error:null},se="AUTH_CHECKED",ie="REGISTER_USER_REQUEST",oe="REGISTER_USER_SUCCESS",le="REGISTER_USER_FAILED",ue="LOGIN_USER_REQUEST",de="LOGIN_USER_SUCCESS",je="LOGIN_USER_FAILED",me="GET_USER_REQUEST",be="GET_USER_SUCCESS",pe="GET_USER_FAILED",_e="UPDATE_USER_REQUEST",Oe="UPDATE_USER_SUCCESS",xe="UPDATE_USER_FAILED",fe="USER_LOGOUT",he=function(){return function(e){return fetch("".concat(f,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return h(e)})).then((function(){localStorage.clear(),x("accessToken","",{expires:-1}),e({type:fe})})).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0432\u044b\u0445\u043e\u0434\u0430")}))}},ge=function(e,t,n){return function(a){return a({type:ie}),(r={email:e,name:t,password:n},fetch("".concat(f,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)}).then((function(e){return h(e)})).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(e){x("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),a({type:oe,payload:e.user})})).catch((function(e){a({type:le,payload:e.message})}));var r}},ye=function(e,t){return function(n){return n({type:ue}),(a={email:e,password:t},fetch("".concat(f,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then((function(e){return h(e)})).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(e){x("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),n({type:de,payload:e.user})})).catch((function(e){n({type:je,payload:e.message})}));var a}},ve=function(){return function(e){return e({type:me}),y("".concat(f,"/auth/user"),{headers:{authorization:O("accessToken")}}).then((function(t){e({type:be,payload:t.user})})).catch((function(t){e({type:pe,payload:t.message})}))}},Ne=function(e){return function(t){return t({type:_e}),(n=e,y("".concat(f,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",authorization:O("accessToken")},body:JSON.stringify(n)})).then((function(e){t({type:Oe,payload:e.user})})).catch((function(e){t({type:xe,payload:e.message})}));var n}},Ee={isAuthChecked:!1,data:null,registerUserError:null,registerUserRequest:!1,loginUserError:null,loginUserRequest:!1,updateUserError:null,updateUserRequest:!1,getUserError:null,getUserRequest:!1},Ce=Object(u.combineReducers)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(_.a)(Object(_.a)({},e),{},{isLoading:!0,error:null});case L:return Object(_.a)(Object(_.a)({},e),{},{data:t.payload,isLoading:!1,error:null});case P:return Object(_.a)(Object(_.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return"bun"===t.payload.type?Object(_.a)(Object(_.a)({},e),{},{bun:t.payload}):Object(_.a)(Object(_.a)({},e),{},{ingredients:[].concat(Object(q.a)(e.ingredients),[t.payload])});case J:return Object(_.a)(Object(_.a)({},e),{},{ingredients:[].concat(Object(q.a)(e.ingredients.slice(0,t.payload)),Object(q.a)(e.ingredients.slice(t.payload+1)))});case H:var n=Object(q.a)(e.ingredients);return n.splice(t.payload.to,0,n.splice(t.payload.from,1)[0]),Object(_.a)(Object(_.a)({},e),{},{ingredients:n});case Q:return W;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(_.a)(Object(_.a)({},e),{},{isNewOrderLoading:!0,newOrderError:null});case V:return Object(_.a)(Object(_.a)({},e),{},{newOrderData:t.payload,isNewOrderLoading:!1,newOrderError:null});case X:return Object(_.a)(Object(_.a)({},e),{},{isNewOrderLoading:!1,newOrderError:t.payload});case K:return Object(_.a)(Object(_.a)({},e),{},{newOrderData:null});case Z:return Object(_.a)(Object(_.a)({},e),{},{isOrderByNumberLoading:!0,orderByNumberError:null});case $:return Object(_.a)(Object(_.a)({},e),{},{orderByNumber:t.payload.orders[0],isOrderByNumberLoading:!1,orderByNumberError:null});case ee:return Object(_.a)(Object(_.a)({},e),{},{isOrderByNumberLoading:!1,orderByNumberError:t.payload});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(_.a)(Object(_.a)({},e),{},{isOpen:!0,error:null});case C:return Object(_.a)(Object(_.a)({},e),{},{error:t.payload});case T:return Object(_.a)(Object(_.a)({},e),{},{isOpen:!1});case R:return Object(_.a)(Object(_.a)({},e),{},{data:t.payload.data.orders});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(_.a)(Object(_.a)({},e),{},{isOpen:!0,error:null});case k:return Object(_.a)(Object(_.a)({},e),{},{error:t.payload});case U:return Object(_.a)(Object(_.a)({},e),{},{isOpen:!1});case A:return Object(_.a)(Object(_.a)({},e),{},{orders:t.payload.data.orders,total:t.payload.data.total,totalToday:t.payload.data.totalToday});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(_.a)(Object(_.a)({},e),{},{isAuthChecked:!0});case fe:return Object(_.a)(Object(_.a)({},e),{},{data:null});case ie:return Object(_.a)(Object(_.a)({},e),{},{registerUserRequest:!0,registerUserError:null});case oe:return Object(_.a)(Object(_.a)({},e),{},{registerUserRequest:!1,data:t.payload,isAuthChecked:!0});case le:return Object(_.a)(Object(_.a)({},e),{},{registerUserRequest:!1,registerUserError:t.payload});case ue:return Object(_.a)(Object(_.a)({},e),{},{loginUserRequest:!0,loginUserError:null});case de:return Object(_.a)(Object(_.a)({},e),{},{loginUserRequest:!1,data:t.payload,isAuthChecked:!0});case je:return Object(_.a)(Object(_.a)({},e),{},{loginUserRequest:!1,loginUserError:t.payload});case be:return Object(_.a)(Object(_.a)({},e),{},{getUserRequest:!1,data:t.payload});case pe:return Object(_.a)(Object(_.a)({},e),{},{getUserRequest:!1,getUserError:t.payload});case me:return Object(_.a)(Object(_.a)({},e),{},{getUserRequest:!0,getUserError:null});case _e:return Object(_.a)(Object(_.a)({},e),{},{updateUserRequest:!0,updateUserError:null});case Oe:return Object(_.a)(Object(_.a)({},e),{},{updateUserRequest:!1,data:t.payload});case xe:return Object(_.a)(Object(_.a)({},e),{},{updateUserRequest:!1,updateUserError:t.payload});default:return e}}}),Te={wsInit:N,wsClose:S,onOpen:E,onClose:T,onError:C,onMessage:R},Se={wsInit:w,wsClose:D,onOpen:I,onClose:U,onError:k,onMessage:A},Re=Object(u.createStore)(Ce,Object(j.composeWithDevTools)(Object(u.applyMiddleware)(d.a,v(Te),v(Se)))),we=function(){return Object(i.b)()},Ie=i.c,ke=Re,Ue=n(7),De=n(34),Ae=n.n(De),Be=n(5),Le=n(26),Pe=n.n(Le),Fe=n(0),Ge=function(){var e=!!Object(Ue.j)({path:"/",exact:!0}),t=!!Object(Ue.j)("/feed"),n=!!Object(Ue.j)("/profile"),a=Ie((function(e){var t;return null===(t=e.user.data)||void 0===t?void 0:t.name}));return Object(Fe.jsx)("header",{className:Pe.a.header,children:Object(Fe.jsxs)("nav",{className:"".concat(Pe.a.menu," pt-4 pb-4"),children:[Object(Fe.jsxs)("div",{className:Pe.a.menu_part_left,children:[Object(Fe.jsxs)(o.c,{to:"/",className:Pe.a.link,activeClassName:Pe.a.link_active,exact:!0,children:[Object(Fe.jsx)(Be.BurgerIcon,{type:e?"primary":"secondary"}),Object(Fe.jsx)("p",{className:"text text_type_main-default ml-2","data-cy":"mainpage-link",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(Fe.jsxs)(o.c,{to:"/feed",className:"".concat(Pe.a.link," ml-10"),activeClassName:Pe.a.link_active,children:[Object(Fe.jsx)(Be.ListIcon,{type:t?"primary":"secondary"}),Object(Fe.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(Fe.jsx)("div",{className:Pe.a.logo,children:Object(Fe.jsx)(Be.Logo,{})}),Object(Fe.jsxs)(o.c,{to:"/profile",className:"".concat(Pe.a.link," ").concat(Pe.a.link_position_last),activeClassName:Pe.a.link_active,children:[Object(Fe.jsx)(Be.ProfileIcon,{type:n?"primary":"secondary"}),Object(Fe.jsx)("p",{className:"text text_type_main-default ml-2","data-cy":"profile-link",children:a||"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},qe=n(225),Me=n(128),ze=n(68),Je=n.n(ze),He=n(9),Qe=n(70),We=n(69),Ye=n.n(We),Ve=n(124),Xe=n.n(Ve),Ke=n(229),Ze=n(54),$e=n.n(Ze),et=function(e){var t=e.ingredient,n=e.count,a=Object(Ue.h)(),r=t.image,c=t.price,s=t.name,i=t._id,l=Object(Ke.a)((function(){return{type:"NEW_INGREDIENT",item:t,collect:function(e){return{isDragging:e.isDragging(),handlerId:e.getHandlerId()}}}})),u=Object(He.a)(l,2),d=u[0].isDragging,j=u[1],m=d?.4:1;return Object(Fe.jsxs)(o.b,{className:$e.a.article,to:{pathname:"/ingredients/".concat(i),state:{background:a}},style:{opacity:m},ref:j,children:[n&&Object(Fe.jsx)(Be.Counter,{count:n}),Object(Fe.jsx)("img",{className:$e.a.img,src:r,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430."}),Object(Fe.jsxs)("div",{className:"".concat($e.a.cost," mt-2 mb-2"),children:[Object(Fe.jsx)("p",{className:"text text_type_digits-default mr-2",children:c}),Object(Fe.jsx)(Be.CurrencyIcon,{type:"primary"})]}),Object(Fe.jsx)("p",{className:"text text_type_main-default ".concat($e.a.text),children:s})]})},tt=r.a.memo(et),nt=r.a.forwardRef((function(e,t){var n=e.title,r=e.titleId,c=e.ingredients,s=Ie((function(e){return e.burgerConstructor})),i=Object(a.useMemo)((function(){var e=s.bun,t=s.ingredients,n={};return t.forEach((function(e){n[e._id]||(n[e._id]=0),n[e._id]++})),e&&(n[e._id]=2),n}),[s]);return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("h3",{className:"text text_type_main-medium mt-10 mb-6",id:r,children:n}),Object(Fe.jsx)("div",{className:Xe.a.items,ref:t,children:c.map((function(e){return Object(Fe.jsx)(tt,{ingredient:e,count:i[e._id]},e._id)}))})]})})),at=r.a.memo(nt),rt=function(){var e=r.a.useState("buns"),t=Object(He.a)(e,2),n=t[0],c=t[1],s=Ie((function(e){return e.ingredients.data})),i=Object(Qe.a)({threshold:0}),o=Object(He.a)(i,2),l=o[0],u=o[1],d=Object(Qe.a)({threshold:0}),j=Object(He.a)(d,2),m=j[0],b=j[1],p=Object(Qe.a)({threshold:0}),_=Object(He.a)(p,2),O=_[0],x=_[1];r.a.useEffect((function(){u?c("buns"):x?c("sauces"):b&&c("mains")}),[u,b,x]);var f=function(e){c(e);var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},h=Object(a.useMemo)((function(){return s.filter((function(e){return"bun"===e.type}))}),[s]),g=Object(a.useMemo)((function(){return s.filter((function(e){return"main"===e.type}))}),[s]),y=Object(a.useMemo)((function(){return s.filter((function(e){return"sauce"===e.type}))}),[s]);return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)("section",{className:Ye.a.burger_ingredients,children:[Object(Fe.jsx)("nav",{children:Object(Fe.jsxs)("ul",{className:Ye.a.menu,children:[Object(Fe.jsx)(Be.Tab,{value:"buns",active:"buns"===n,onClick:f,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(Fe.jsx)(Be.Tab,{value:"mains",active:"mains"===n,onClick:f,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(Fe.jsx)(Be.Tab,{value:"sauces",active:"sauces"===n,onClick:f,children:"\u0421\u043e\u0443\u0441\u044b"})]})}),Object(Fe.jsxs)("div",{className:Ye.a.content,"data-cy":"ingredients",children:[Object(Fe.jsx)(at,{title:"\u0411\u0443\u043b\u043a\u0438",titleId:"buns",ingredients:h,ref:l}),Object(Fe.jsx)(at,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",titleId:"mains",ingredients:g,ref:m}),Object(Fe.jsx)(at,{title:"\u0421\u043e\u0443\u0441\u044b",titleId:"sauces",ingredients:y,ref:O})]})]})})},ct=n(230),st=n(16),it=n.n(st),ot=n(44),lt=n.n(ot),ut=n(126),dt=n.n(ut),jt=function(e){var t=e.onClick;return Object(Fe.jsx)("div",{className:dt.a.overlay,onClick:t,"data-cy":"modal-overlay"})},mt=document.getElementById("modals"),bt=function(e){var t=e.title,n=e.onClose,a=e.children;return r.a.useEffect((function(){var e=function(e){"Escape"===e.key&&n()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n]),s.a.createPortal(Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("div",{className:lt.a.modal,children:[Object(Fe.jsxs)("div",{className:lt.a.header,children:[Object(Fe.jsx)("h3",{className:"".concat(lt.a.title," text text_type_main-large"),children:t}),Object(Fe.jsx)("button",{className:lt.a.button,type:"button","aria-label":"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",children:Object(Fe.jsx)(Be.CloseIcon,{type:"primary",onClick:n})})]}),Object(Fe.jsx)("div",{className:lt.a.content,children:a})]}),Object(Fe.jsx)(jt,{onClick:n})]}),mt)},pt=n(71),_t=n.n(pt),Ot=n.p+"static/media/done.85c3a14d.svg",xt=function(e){var t=e.orderNumber;return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("h2",{className:"".concat(_t.a.title," text text_type_digits-large mt-2 mb-4"),"data-cy":"order-number",children:t}),Object(Fe.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Fe.jsx)("img",{className:_t.a.img,src:Ot,alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430."}),Object(Fe.jsx)("p",{className:"text text_type_main-default mb-1",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(Fe.jsx)("p",{className:"".concat(_t.a.text," text text_type_main-default"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},ft=n(96),ht=n.n(ft),gt=function(e){var t=e.ingredient,n=e.index,r=we(),c=Object(a.useRef)(null),s=Object(ct.a)({accept:["SORT_INGREDIENT"],collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a,s=e.index,i=n;if(s!==i){var o=null===(a=c.current)||void 0===a?void 0:a.getBoundingClientRect(),l=t.getClientOffset();if(o&&l){var u=(o.bottom-o.top)/2,d=l.y-o.top;s<i&&d<u||s>i&&d>u||(r({type:H,payload:{from:s,to:i}}),e.index=i)}}}}),i=Object(He.a)(s,2),o=i[0].handlerId,l=i[1],u=Object(Ke.a)({type:"SORT_INGREDIENT",item:function(){return{ingredient:t,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),d=Object(He.a)(u,2),j=d[0].isDragging?0:1;return(0,d[1])(l(c)),Object(Fe.jsxs)("li",{className:"".concat(ht.a.element," mb-4 mr-2"),style:{opacity:j},"data-handler-id":o,ref:c,children:[Object(Fe.jsx)(Be.DragIcon,{type:"primary"}),Object(Fe.jsx)("div",{className:"".concat(ht.a.element_fullwidth," ml-2"),children:Object(Fe.jsx)(Be.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return r({type:J,payload:n})}})})]})},yt=r.a.memo(gt),vt=n(97),Nt=n.n(vt),Et=function(){return Object(Fe.jsx)("div",{className:Nt.a.preloader,children:Object(Fe.jsx)("div",{className:Nt.a.preloader_circle})})},Ct=function(){var e=Object(Ue.g)(),t=we(),n=Ie((function(e){return e.burgerConstructor})),r=Ie((function(e){return e.order.isNewOrderLoading})),c=Ie((function(e){return e.order.newOrderData})),s=Ie((function(e){return e.user.data})),i=Object(ct.a)((function(){return{accept:"NEW_INGREDIENT",drop:function(e){return t((n=e,{type:z,payload:Object(_.a)(Object(_.a)({},n),{},{id:Object(M.a)()})}));var n},collect:function(e){return{canDrop:e.canDrop(),dragItem:e.getItem(),isOver:e.isOver()}}}})),o=Object(He.a)(i,2),l=o[0],u=l.canDrop,d=l.dragItem,j=o[1],m=u&&d&&"bun"===d.type,b=u&&d&&"bun"!==d.type,p=function(){return t({type:K})},O=Object(a.useMemo)((function(){return(n.bun?2*n.bun.price:0)+n.ingredients.reduce((function(e,t){return e+t.price}),0)}),[n]);return Object(Fe.jsxs)("section",{className:it.a.burger_constructor,ref:j,"data-cy":"constructor",children:[n.bun?Object(Fe.jsx)("div",{className:"".concat(it.a.element," mb-4 mr-4"),"data-cy":"constructor-bun-1",children:Object(Fe.jsx)(Be.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(n.bun.name," (\u0432\u0435\u0440\u0445)"),price:n.bun.price,thumbnail:n.bun.image})}):Object(Fe.jsx)("div",{className:"".concat(it.a.noBuns," ").concat(m&&it.a.dragActive," ").concat(it.a.noBunsTop," ml-8 mb-4 mr-5 text text_type_main-default"),children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0438"}),Object(Fe.jsx)("ul",{className:it.a.elements,"data-cy":"constructor-ingredients",children:n.ingredients.length>0?n.ingredients.map((function(e,t){return Object(Fe.jsx)(yt,{ingredient:e,index:t},e.id)})):Object(Fe.jsx)("div",{className:"".concat(it.a.noBuns," ").concat(b&&it.a.dragActive," ml-8 mb-4 mr-5 text text_type_main-default"),children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u0447\u0438\u043d\u043a\u0443"})}),n.bun?Object(Fe.jsx)("div",{className:"".concat(it.a.element," mt-4 mr-4"),"data-cy":"constructor-bun-2",children:Object(Fe.jsx)(Be.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.bun.name," (\u043d\u0438\u0437)"),price:n.bun.price,thumbnail:n.bun.image})}):Object(Fe.jsx)("div",{className:"".concat(it.a.noBuns," ").concat(m&&it.a.dragActive," ").concat(it.a.noBunsBottom," ml-8 mb-4 mr-5 text text_type_main-default"),children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0438"}),Object(Fe.jsxs)("div",{className:"".concat(it.a.total," mt-10 mr-4"),"data-cy":"order-summ",children:[Object(Fe.jsxs)("div",{className:"".concat(it.a.cost," mr-10"),children:[Object(Fe.jsx)("p",{className:"text ".concat(it.a.text," mr-2"),children:O}),Object(Fe.jsx)(Be.CurrencyIcon,{type:"primary"})]}),Object(Fe.jsx)(Be.Button,{type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437",onClick:function(){s?n.bun&&!r&&t(te([n.bun._id].concat(Object(q.a)(n.ingredients.map((function(e){return e._id}))),[n.bun._id]))):e.push("/login")}})]}),r&&Object(Fe.jsx)(bt,{onClose:p,title:"\u041e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c \u0437\u0430\u043a\u0430\u0437...",children:Object(Fe.jsx)(Et,{})}),c&&Object(Fe.jsx)(bt,{onClose:p,title:r?"\u041e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c \u0437\u0430\u043a\u0430\u0437...":"",children:Object(Fe.jsx)(xt,{orderNumber:c.number})})]})},Tt=function(){return Ie((function(e){return e.ingredients.isLoading}))?Object(Fe.jsx)(Et,{}):Object(Fe.jsxs)("main",{className:Je.a.containerMain,children:[Object(Fe.jsx)("h1",{className:"".concat(Je.a.title," text text_type_main-large mt-10 mb-5"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(Fe.jsx)(qe.a,{backend:Me.a,children:Object(Fe.jsxs)("div",{className:"".concat(Je.a.main),children:[Object(Fe.jsx)(rt,{}),Object(Fe.jsx)(Ct,{})]})})]})},St=n(8),Rt=n.n(St),wt=function(){var e=we(),t=Object(a.useState)(""),n=Object(He.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(He.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(""),j=Object(He.a)(d,2),m=j[0],b=j[1],p=Ie((function(e){return e.user.registerUserError}));return Object(Fe.jsx)("main",{className:Rt.a.container,children:Object(Fe.jsxs)("div",{className:"pt-6 ".concat(Rt.a.wrapCenter),children:[Object(Fe.jsx)("h3",{className:"pb-6 text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(Fe.jsxs)("form",{className:"pb-15 ".concat(Rt.a.form),name:"register",onSubmit:function(t){t.preventDefault(),e(ge(l,r,m))},children:[Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return c(e.target.value)},value:r,name:"name",error:!1,errorText:"",size:"default"})}),Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return u(e.target.value)},value:l,name:"email",error:!1,errorText:"",size:"default"})}),Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.PasswordInput,{onChange:function(e){return b(e.target.value)},value:m,name:"password"})}),Object(Fe.jsx)("div",{className:"pb-6 ".concat(Rt.a.button),children:Object(Fe.jsx)(Be.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),p&&Object(Fe.jsx)("p",{className:"".concat(Rt.a.error," text text_type_main-default pb-6"),children:p})]}),Object(Fe.jsxs)("div",{className:"".concat(Rt.a.question," text text_type_main-default pb-6"),children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(Fe.jsx)(o.b,{to:"/login",className:"pl-2 ".concat(Rt.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},It=function(){var e=we(),t=Object(a.useState)(""),n=Object(He.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(He.a)(s,2),l=i[0],u=i[1],d=Ie((function(e){return e.user.loginUserError}));return Object(Fe.jsx)("main",{className:Rt.a.container,children:Object(Fe.jsxs)("div",{className:"pt-6 ".concat(Rt.a.wrapCenter),children:[Object(Fe.jsx)("h3",{className:"pb-6 text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(Fe.jsxs)("form",{className:"pb-15 ".concat(Rt.a.form),name:"login",onSubmit:function(t){t.preventDefault(),e(ye(r,l))},children:[Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.Input,{type:"email",placeholder:"E-mail",onChange:function(e){return c(e.target.value)},value:r,name:"email",error:!1,errorText:"",size:"default"})}),Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.PasswordInput,{onChange:function(e){return u(e.target.value)},value:l,name:"password"})}),Object(Fe.jsx)("div",{className:"pb-6 ".concat(Rt.a.button),children:Object(Fe.jsx)(Be.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})}),d&&Object(Fe.jsx)("p",{className:"".concat(Rt.a.error," text text_type_main-default pb-6"),children:d})]}),Object(Fe.jsxs)("div",{className:"pb-4 ".concat(Rt.a.question," text text_type_main-default"),children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(Fe.jsx)(o.b,{to:"/register",className:"pl-2 ".concat(Rt.a.link),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(Fe.jsxs)("div",{className:"".concat(Rt.a.question," text text_type_main-default pb-6"),children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(Fe.jsx)(o.b,{to:"/forgot-password",className:"pl-2 ".concat(Rt.a.link),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},kt=function(){var e=Object(a.useState)(""),t=Object(He.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(He.a)(c,2),i=s[0],l=s[1],u=Object(Ue.g)();return Object(Fe.jsx)("main",{className:Rt.a.container,children:Object(Fe.jsxs)("div",{className:"pt-6 ".concat(Rt.a.wrapCenter),children:[Object(Fe.jsx)("h3",{className:"pb-6 text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(Fe.jsxs)("form",{className:"pb-15 ".concat(Rt.a.form),name:"login",onSubmit:function(e){var t;e.preventDefault(),l(null),(t={email:n},fetch("".concat(f,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(e){return h(e)})).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(){localStorage.setItem("resetPassword","true"),u.replace("/reset-password")})).catch((function(e){return l(e)}))},children:[Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return r(e.target.value)},value:n,name:"email",error:!1,errorText:"",size:"default"})}),Object(Fe.jsx)("div",{className:"pb-6 ".concat(Rt.a.button),children:Object(Fe.jsx)(Be.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),i&&Object(Fe.jsx)("p",{className:"".concat(Rt.a.error," text text_type_main-default pb-6"),children:i})]}),Object(Fe.jsxs)("div",{className:"".concat(Rt.a.question," text text_type_main-default pb-6"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(Fe.jsx)(o.b,{to:"/login",className:"pl-2 ".concat(Rt.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Ut=n(60),Dt=n(72),At=n.n(Dt),Bt=n(45),Lt=n.n(Bt),Pt=function(){var e=we(),t=Object(Ue.h)();return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(o.c,{exact:!0,to:"/profile",activeClassName:Lt.a.activeLink,className:"text text_type_main-medium text_color_inactive pt-4 pb-4 ".concat(Lt.a.link),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(Fe.jsx)(o.c,{exact:!0,to:"/profile/orders",activeClassName:Lt.a.activeLink,className:"text text_type_main-medium text_color_inactive pt-4 pb-4 ".concat(Lt.a.link),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Fe.jsx)("button",{className:"text text_type_main-medium text_color_inactive pt-4 pb-4 ".concat(Lt.a.button),onClick:function(){e(he())},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(Fe.jsx)("p",{className:"pt-20 text text_type_main-default text_color_inactive",children:"/profile"===t.pathname?"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435":"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})},Ft=function(){var e=we(),t=Ie((function(e){return e.user})),n=t.data,r=t.updateUserError,c=n,s=Object(a.useState)({name:null===c||void 0===c?void 0:c.name,email:null===c||void 0===c?void 0:c.email,password:""}),i=Object(He.a)(s,2),o=i[0],l=i[1];Object(a.useEffect)((function(){e(ve)}),[e]),Object(a.useEffect)((function(){l((function(e){return Object(_.a)(Object(_.a)({},e),{},{name:(null===c||void 0===c?void 0:c.name)||"",email:(null===c||void 0===c?void 0:c.email)||""})}))}),[c]);var u=o.name!==(null===c||void 0===c?void 0:c.name)||o.email!==(null===c||void 0===c?void 0:c.email)||o.password,d=function(e){l((function(t){return Object(_.a)(Object(_.a)({},t),{},Object(Ut.a)({},e.target.name,e.target.value))}))};return Object(Fe.jsxs)("main",{className:"".concat(Rt.a.container),children:[Object(Fe.jsx)("div",{className:"mt-30 mr-15 ".concat(At.a.menu),children:Object(Fe.jsx)(Pt,{})}),Object(Fe.jsxs)("form",{className:"mt-30 ".concat(At.a.form," ").concat(Rt.a.form),onSubmit:function(t){t.preventDefault(),e(Ne(o)).then((function(){r||l({name:null===c||void 0===c?void 0:c.name,email:null===c||void 0===c?void 0:c.email,password:""})}))},children:[Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:d,value:o.name,name:"name",error:!1,errorText:"",size:"default",icon:"EditIcon"})}),Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.Input,{type:"email",placeholder:"E-mail",onChange:d,value:o.email,name:"email",error:!1,errorText:"",size:"default",icon:"EditIcon"})}),Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:d,value:o.password,name:"password",error:!1,errorText:"",size:"default",icon:"EditIcon"})}),u&&Object(Fe.jsxs)("div",{className:At.a.button,children:[Object(Fe.jsx)(Be.Button,{type:"secondary",htmlType:"button",size:"medium",onClick:function(e){e.preventDefault(),l({name:null===c||void 0===c?void 0:c.name,email:null===c||void 0===c?void 0:c.email,password:""})},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Fe.jsx)(Be.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),r&&Object(Fe.jsx)("p",{className:"".concat(Rt.a.error," pt-5 text text_type_main-default"),children:r})]})]})},Gt=n(73),qt=n.n(Gt),Mt=n(127),zt=n.n(Mt),Jt=n(29),Ht=n.n(Jt),Qt={pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",created:"\u0421\u043e\u0437\u0434\u0430\u043d"},Wt=function(e){var t=e.status,n="";switch(t){case"pending":n="#E52B1A";break;case"done":n="#00CCCC";break;default:n="#F2F2F3"}return Object(Fe.jsx)("span",{className:"text text_type_main-default pt-2",style:{color:n},children:Qt[t]})},Yt=n(226),Vt=n(227),Xt=n(233),Kt=n(228),Zt=n(231);function $t(e){return Object(Yt.a)(e)?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(Object(Vt.a)(e,"kk:mm",{locale:Zt.a})):Object(Xt.a)(e)?"\u0412\u0447\u0435\u0440\u0430, ".concat(Object(Vt.a)(e,"kk:mm",{locale:Zt.a})):"".concat(Object(Kt.a)(e,Date.now(),{locale:Zt.a})," \u043d\u0430\u0437\u0430\u0434")}var en=function(e){var t=e.order,n=Object(Ue.h)(),r=Ie((function(e){return e.ingredients.data})),c=Object(a.useMemo)((function(){if(!r.length)return null;var e=t.ingredients.reduce((function(e,t){var n=r.find((function(e){return e._id===t}));return n?[].concat(Object(q.a)(e),[n]):e}),[]),n=e.reduce((function(e,t){return e+t.price}),0),a=e.slice(0,6),c=e.length>6?e.length-6:0,s=$t(new Date(t.createdAt));return Object(_.a)(Object(_.a)({},t),{},{ingredientsInfo:e,ingredientsToShow:a,remains:c,total:n,date:s})}),[t,r]);return c?Object(Fe.jsxs)(o.b,{to:{pathname:"".concat(n.pathname,"/").concat(c.number),state:{background:n}},className:"p-6 mb-4 mr-2 ".concat(Ht.a.order),children:[Object(Fe.jsxs)("div",{className:Ht.a.order_info,children:[Object(Fe.jsxs)("span",{className:"text text_type_digits-default ".concat(Ht.a.number),children:["#",String(c.number).padStart(6,"0")]}),Object(Fe.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:c.date})]}),Object(Fe.jsx)("h4",{className:"pt-6 text text_type_main-medium ".concat(Ht.a.order_name),children:c.name}),"/profile/orders"===n.pathname&&Object(Fe.jsx)(Wt,{status:c.status}),Object(Fe.jsxs)("div",{className:"pt-6 ".concat(Ht.a.order_content),children:[Object(Fe.jsx)("ul",{className:Ht.a.ingredients,children:c.ingredientsToShow.map((function(e,t){var n=6-t,a=20*t;return Object(Fe.jsxs)("li",{className:Ht.a.img_wrap,style:{zIndex:n,right:a},children:[Object(Fe.jsx)("img",{style:{opacity:c.remains&&6===t+1?"0.5":"1"},className:Ht.a.img,src:e.image_mobile,alt:e.name}),6===t+1?Object(Fe.jsx)("span",{className:"text text_type_digits-default ".concat(Ht.a.remains),children:c.remains>0?"+".concat(c.remains):null}):null]},t)}))}),Object(Fe.jsxs)("div",{children:[Object(Fe.jsx)("span",{className:"text text_type_digits-default pr-1 ".concat(Ht.a.order_total),children:c.total}),Object(Fe.jsx)(Be.CurrencyIcon,{type:"primary"})]})]})]}):null},tn=function(e){var t=e.orders.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}));return Object(Fe.jsx)("div",{className:"".concat(zt.a.content),children:t.map((function(e){return Object(Fe.jsx)(en,{order:e},e._id)}))})},nn=function(){var e=we(),t=Ie((function(e){return e.orders.data}));return Object(a.useEffect)((function(){var t=O("accessToken");if(t)return e({type:N,payload:"".concat("wss://norma.nomoreparties.space/orders","?token=").concat(t.replace("Bearer ",""))}),function(){e({type:S})}}),[e]),Object(Fe.jsxs)("main",{className:"".concat(qt.a.main),children:[Object(Fe.jsx)("div",{className:"mt-30 mr-15 ".concat(qt.a.menu),children:Object(Fe.jsx)(Pt,{})}),Object(Fe.jsx)("div",{className:"mt-10 ".concat(qt.a.orders),children:Object(Fe.jsx)(tn,{orders:t})})]})},an=n(129),rn=["onlyUnAuth","children"],cn=function(e){var t=e.onlyUnAuth,n=void 0!==t&&t,a=e.children,r=Object(an.a)(e,rn),c=Ie((function(e){return e.user.isAuthChecked})),s=Ie((function(e){return e.user.data})),i=Object(Ue.h)();if(!c)return Object(Fe.jsx)(Et,{});if(n&&s){var o=(i.state||{from:{pathname:"/"}}).from;return Object(Fe.jsx)(Ue.b,Object(_.a)(Object(_.a)({},r),{},{children:Object(Fe.jsx)(Ue.a,{to:o})}))}return n||s?Object(Fe.jsx)(Ue.b,Object(_.a)(Object(_.a)({},r),{},{children:a})):Object(Fe.jsx)(Ue.b,Object(_.a)(Object(_.a)({},r),{},{children:Object(Fe.jsx)(Ue.a,{to:{pathname:"/login",state:{from:i}}})}))},sn=n(27),on=n.n(sn),ln=function(){var e=Object(Ue.i)().id,t=Ie((function(t){return t.ingredients.data.find((function(t){return t._id===e}))}));if(!t)return Object(Fe.jsx)(Et,{});var n=t.name,a=t.image_large,r=t.calories,c=t.proteins,s=t.fat,i=t.carbohydrates;return Object(Fe.jsxs)("div",{className:on.a.content,children:[Object(Fe.jsx)("img",{className:on.a.img,alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430.",src:a}),Object(Fe.jsx)("h3",{className:"text text_type_main-medium mt-2 mb-4",children:n}),Object(Fe.jsx)("p",{className:"text text_type_main-default mb-4"}),Object(Fe.jsxs)("ul",{className:"".concat(on.a.nutritional_values," text_type_main-default"),children:[Object(Fe.jsxs)("li",{className:on.a.nutritional_value,children:[Object(Fe.jsx)("p",{className:"text mb-2 ".concat(on.a.text),children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(Fe.jsx)("p",{className:"text text_type_digits-default",children:r})]}),Object(Fe.jsxs)("li",{className:on.a.nutritional_value,children:[Object(Fe.jsx)("p",{className:"text mb-2 ".concat(on.a.text),children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(Fe.jsx)("p",{className:"text text_type_digits-default",children:c})]}),Object(Fe.jsxs)("li",{className:on.a.nutritional_value,children:[Object(Fe.jsx)("p",{className:"text mb-2 ".concat(on.a.text),children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(Fe.jsx)("p",{className:"text text_type_digits-default",children:s})]}),Object(Fe.jsxs)("li",{className:on.a.nutritional_value,children:[Object(Fe.jsx)("p",{className:"text mb-2 ".concat(on.a.text),children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(Fe.jsx)("p",{className:"text text_type_digits-default",children:i})]})]})]})},un=function(){var e=Object(Ue.g)(),t=Object(a.useState)(""),n=Object(He.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(He.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(null),j=Object(He.a)(d,2),m=j[0],b=j[1];return Object(a.useEffect)((function(){localStorage.getItem("resetPassword")||e.replace("/forgot-password")}),[e]),Object(Fe.jsx)("main",{className:Rt.a.container,children:Object(Fe.jsxs)("div",{className:"pt-6 ".concat(Rt.a.wrapCenter),children:[Object(Fe.jsx)("h3",{className:"pb-6 text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(Fe.jsxs)("form",{className:"pb-15 ".concat(Rt.a.form),name:"login",onSubmit:function(t){var n;t.preventDefault(),b(null),(n={password:r,token:l},fetch("".concat(f,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)}).then((function(e){return h(e)})).then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)}))).then((function(){localStorage.removeItem("resetPassword"),e.push("/login")})).catch((function(e){return b(e)}))},children:[Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.PasswordInput,{onChange:function(e){return c(e.target.value)},value:r,name:"password"})}),Object(Fe.jsx)("div",{className:"pb-6",children:Object(Fe.jsx)(Be.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return u(e.target.value)},value:l,name:"token",error:!1,errorText:"",size:"default"})}),Object(Fe.jsx)("div",{className:"pb-6 ".concat(Rt.a.button),children:Object(Fe.jsx)(Be.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),m&&Object(Fe.jsx)("p",{className:"".concat(Rt.a.error," text text_type_main-default pb-6"),children:m})]}),Object(Fe.jsxs)("div",{className:"".concat(Rt.a.question," text text_type_main-default pb-6"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(Fe.jsx)(o.b,{to:"/login",className:"pl-2 ".concat(Rt.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},dn=n(30),jn=n.n(dn),mn=function(){var e=Object(Ue.i)().number,t=we(),n=Ie((function(e){return e.ingredients.data})),r=Ie((function(t){var n;if(t.orders.isOpen&&t.orders.data.length){var a=t.orders.data.find((function(t){return t.number===+e}));if(a)return a}if(t.feed.isOpen&&t.feed.orders.length){var r=t.feed.orders.find((function(t){return t.number===+e}));if(r)return r}return(null===(n=t.order.orderByNumber)||void 0===n?void 0:n.number)===+e?t.order.orderByNumber:null}));Object(a.useEffect)((function(){r||t(ne(+e))}),[t,r,e]);var c=Object(a.useMemo)((function(){if(!r||!n.length)return null;var e=$t(new Date(r.createdAt)),t=r.ingredients.reduce((function(e,t){if(e[t])e[t].count++;else{var a=n.find((function(e){return e._id===t}));a&&(e[t]=Object(_.a)(Object(_.a)({},a),{},{count:1}))}return e}),{}),a=Object.values(t).reduce((function(e,t){return e+t.price*t.count}),0);return Object(_.a)(Object(_.a)({},r),{},{ingredientsInfo:t,date:e,total:a})}),[r,n]);return c?Object(Fe.jsxs)("div",{className:jn.a.wrap,children:[Object(Fe.jsx)("h3",{className:"text text_type_main-medium  pb-3 pt-10 ".concat(jn.a.header),children:c.name}),Object(Fe.jsx)(Wt,{status:c.status}),Object(Fe.jsx)("p",{className:"text text_type_main-medium pt-15 pb=6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(Fe.jsx)("ul",{className:"".concat(jn.a.list," mb-8"),children:Object.values(c.ingredientsInfo).map((function(e,t){return Object(Fe.jsxs)("li",{className:"pb-4 pr-6 ".concat(jn.a.item),children:[Object(Fe.jsx)("div",{className:jn.a.img_wrap,children:Object(Fe.jsx)("div",{className:jn.a.border,children:Object(Fe.jsx)("img",{className:jn.a.img,src:e.image_mobile,alt:e.name})})}),Object(Fe.jsx)("span",{className:"text text_type_main-default pl-4",children:e.name}),Object(Fe.jsxs)("span",{className:"text text_type_digits-default pl-4 pr-4 ".concat(jn.a.quantity),children:[e.count," x ",e.price]}),Object(Fe.jsx)(Be.CurrencyIcon,{type:"primary"})]},t)}))}),Object(Fe.jsxs)("div",{className:jn.a.bottom,children:[Object(Fe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:c.date}),Object(Fe.jsx)("span",{className:"text text_type_digits-default pr-4 ".concat(jn.a.total),children:c.total}),Object(Fe.jsx)(Be.CurrencyIcon,{type:"primary"})]})]}):Object(Fe.jsx)(Et,{})},bn=function(){return Object(Fe.jsx)("h3",{className:"pb-6 text text_type_main-large",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430. \u041e\u0448\u0438\u0431\u043a\u0430 404."})},pn=n(46),_n=n.n(pn),On=n(37),xn=n.n(On),fn=function(e){var t=e.orders,n=e.title,a=e.textColor;return Object(Fe.jsxs)("div",{className:"pr-6 ".concat(xn.a.column),children:[Object(Fe.jsxs)("h3",{className:"text text_type_main-medium ".concat(xn.a.title),children:[n,":"]}),Object(Fe.jsx)("ul",{className:"pt-6  ".concat(xn.a.list),children:t.map((function(e,t){return Object(Fe.jsx)("li",{className:"text text_type_digits-default ".concat(xn.a.list_item),style:{color:"blue"===a?"#00cccc":"#F2F2F3"},children:e},t)}))})]})},hn=function(e){var t=e.title,n=e.content;return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("h3",{className:"pt-15 text text_type_main-medium ".concat(xn.a.title),children:[t,":"]}),Object(Fe.jsx)("p",{className:"text text_type_digits-large ".concat(xn.a.content),children:n})]})},gn=function(e,t){return e.filter((function(e){return e.status===t})).map((function(e){return e.number})).slice(0,20)},yn=function(){var e=Ie((function(e){return e.feed})),t=e.total,n=e.totalToday,a=Ie((function(e){return gn(e.feed.orders,"done")})),r=Ie((function(e){return gn(e.feed.orders,"pending")}));return Object(Fe.jsxs)("section",{children:[Object(Fe.jsxs)("div",{className:xn.a.columns,children:[Object(Fe.jsx)(fn,{orders:a,title:"\u0413\u043e\u0442\u043e\u0432\u044b",textColor:"blue"}),Object(Fe.jsx)(fn,{orders:r,title:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"})]}),Object(Fe.jsx)(hn,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f",content:t}),Object(Fe.jsx)(hn,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f",content:n})]})},vn=function(){var e=we();Object(a.useEffect)((function(){return e({type:w,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){e({type:D})}}),[e]);var t=Ie((function(e){return e.feed.orders}));return t.length?Object(Fe.jsxs)("main",{className:_n.a.containerMain,children:[Object(Fe.jsx)("h1",{className:"".concat(_n.a.title," text text_type_main-large mt-10 mb-5"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Fe.jsxs)("div",{className:_n.a.main,children:[Object(Fe.jsx)("div",{className:_n.a.columnOrders,children:Object(Fe.jsx)(tn,{orders:t})}),Object(Fe.jsx)("div",{className:_n.a.columnInfo,children:Object(Fe.jsx)(yn,{})})]})]}):Object(Fe.jsx)(Et,{})},Nn=function(){var e,t,n=we(),r=Object(Ue.g)(),c=Object(Ue.h)(),s=c.state&&c.state.background,i=null===(e=Object(Ue.j)(["/profile/orders/:number","/feed/:number"]))||void 0===e||null===(t=e.params)||void 0===t?void 0:t.number,o=function(){return r.goBack()};return Object(a.useEffect)((function(){n(F()),n((function(e){O("accessToken")?e(ve()).finally((function(){e({type:se})})):e({type:se})}))}),[n]),Object(Fe.jsxs)("div",{className:Ae.a.app,children:[Object(Fe.jsx)(Ge,{}),Object(Fe.jsxs)(Ue.d,{location:s||c,children:[Object(Fe.jsx)(cn,{path:"/profile",exact:!0,children:Object(Fe.jsx)(Ft,{})}),Object(Fe.jsx)(cn,{path:"/profile/orders",exact:!0,children:Object(Fe.jsx)(nn,{})}),Object(Fe.jsx)(cn,{path:"/profile/orders/:number",exact:!0,children:Object(Fe.jsxs)("div",{className:Ae.a.detailPageWrap,children:[Object(Fe.jsxs)("p",{className:"text text_type_digits-default ".concat(Ae.a.detailHeader),children:["#",i&&i.padStart(6,"0")]}),Object(Fe.jsx)(mn,{})]})}),Object(Fe.jsx)(cn,{onlyUnAuth:!0,path:"/register",exact:!0,children:Object(Fe.jsx)(wt,{})}),Object(Fe.jsx)(cn,{onlyUnAuth:!0,path:"/login",exact:!0,children:Object(Fe.jsx)(It,{})}),Object(Fe.jsx)(cn,{onlyUnAuth:!0,path:"/forgot-password",exact:!0,children:Object(Fe.jsx)(kt,{})}),Object(Fe.jsx)(cn,{onlyUnAuth:!0,path:"/reset-password",exact:!0,children:Object(Fe.jsx)(un,{})}),Object(Fe.jsx)(Ue.b,{path:"/ingredients/:id",exact:!0,children:Object(Fe.jsxs)("div",{className:Ae.a.detailPageWrap,children:[Object(Fe.jsx)("p",{className:"text text_type_main-large ".concat(Ae.a.detailHeader),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(Fe.jsx)(ln,{})]})}),Object(Fe.jsx)(Ue.b,{path:"/feed",exact:!0,children:Object(Fe.jsx)(vn,{})}),Object(Fe.jsx)(Ue.b,{path:"/feed/:number",exact:!0,children:Object(Fe.jsxs)("div",{className:Ae.a.detailPageWrap,children:[Object(Fe.jsxs)("p",{className:"text text_type_digits-default ".concat(Ae.a.detailHeader),children:["#",i&&i.padStart(6,"0")]}),Object(Fe.jsx)(mn,{})]})}),Object(Fe.jsx)(Ue.b,{path:"/",exact:!0,children:Object(Fe.jsx)(Tt,{})}),Object(Fe.jsx)(Ue.b,{children:Object(Fe.jsx)("div",{className:Ae.a.detailPageWrap,children:Object(Fe.jsx)(bn,{})})})]}),s&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Ue.b,{path:"/ingredients/:id",exact:!0,children:Object(Fe.jsx)(bt,{onClose:o,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(Fe.jsx)(ln,{})})}),Object(Fe.jsx)(cn,{path:"/profile/orders/:number",exact:!0,children:Object(Fe.jsx)(bt,{onClose:o,title:"#".concat(i&&i.padStart(6,"0")),children:Object(Fe.jsx)(mn,{})})}),Object(Fe.jsx)(Ue.b,{path:"/feed/:number",exact:!0,children:Object(Fe.jsx)(bt,{onClose:o,title:"#".concat(i&&i.padStart(6,"0")),children:Object(Fe.jsx)(mn,{})})})]})]})};s.a.render(Object(Fe.jsx)(r.a.StrictMode,{children:Object(Fe.jsx)(o.a,{children:Object(Fe.jsx)(i.a,{store:ke,children:Object(Fe.jsx)(Nn,{})})})}),document.getElementById("root")),l()},26:function(e,t,n){e.exports={header:"app-header_header__1iHLW",menu:"app-header_menu__3SLom",menu_part_left:"app-header_menu_part_left__2YXg6",link:"app-header_link__2y8TU",link_active:"app-header_link_active__vLEYL",link_position_last:"app-header_link_position_last__3skWP",logo:"app-header_logo__zVEfY"}},27:function(e,t,n){e.exports={content:"ingredient-details_content__WdJuD",nutritional_values:"ingredient-details_nutritional_values__3FKHu",nutritional_value:"ingredient-details_nutritional_value__8pb6e"}},29:function(e,t,n){e.exports={ingredients:"order-card_ingredients__20T5_",order:"order-card_order__3rqYV",order_info:"order-card_order_info__29lCi",order_name:"order-card_order_name__3YBR3",order_content:"order-card_order_content__34Qw-",order_total:"order-card_order_total__1jVgt",img_wrap:"order-card_img_wrap__1acsa",img:"order-card_img__3_go7",remains:"order-card_remains__8DEtg"}},30:function(e,t,n){e.exports={wrap:"order-info_wrap__Gkezw",number:"order-info_number__osrir",status:"order-info_status__wcc9g",header:"order-info_header__1sYHj",img_wrap:"order-info_img_wrap__2AgMB",border:"order-info_border__3fQfd",img:"order-info_img__3xY-m",item:"order-info_item__AxHy8",quantity:"order-info_quantity__1fXgZ",list:"order-info_list__3DYZ3",bottom:"order-info_bottom__3Q0Uw",total:"order-info_total__1krhW"}},34:function(e,t,n){e.exports={app:"app_app__M9MMq",detailPageWrap:"app_detailPageWrap__11w5w",detailHeader:"app_detailHeader__1E_IA"}},37:function(e,t,n){e.exports={columns:"feed-info_columns__CzEBR",column:"feed-info_column__J1dB_",list:"feed-info_list__1JWvG",title:"feed-info_title__WE0nW",list_item:"feed-info_list_item__yrN7o",content:"feed-info_content__3s65D"}},44:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r",button:"modal_button__3_zvg",img:"modal_img__3f0Go",content:"modal_content__1tQ-X"}},45:function(e,t,n){e.exports={link:"profile-menu_link__1GXQJ",activeLink:"profile-menu_activeLink__1Ahyy",button:"profile-menu_button__10VBY"}},46:function(e,t,n){e.exports={containerMain:"feed_containerMain__3I4JH",title:"feed_title__yRxeu",main:"feed_main__3gURw",columnOrders:"feed_columnOrders__TBoiM",columnInfo:"feed_columnInfo__QUvCU"}},54:function(e,t,n){e.exports={article:"burger-ingredient_article__wQtAl",cost:"burger-ingredient_cost__2ItX8",text:"burger-ingredient_text__1IAaT"}},68:function(e,t,n){e.exports={containerMain:"main_containerMain__1lR2l",title:"main_title__89vkE",main:"main_main__tvROX"}},69:function(e,t,n){e.exports={burger_ingredients:"burger-ingredients_burger_ingredients__3HExk",tab:"burger-ingredients_tab__1Ru1Z",content:"burger-ingredients_content__1rMpp",menu:"burger-ingredients_menu__3KO37",categories:"burger-ingredients_categories__1eVbp"}},71:function(e,t,n){e.exports={img:"order-details_img__1gAbq",title:"order-details_title__FoYOr",text:"order-details_text__ZLZ7C"}},72:function(e,t,n){e.exports={menu:"profile_menu__xxfx5",form:"profile_form__3yKlC"}},73:function(e,t,n){e.exports={menu:"profile-orders_menu__HR8A_",main:"profile-orders_main__3CNRY",orders:"profile-orders_orders__2ocR4"}},8:function(e,t,n){e.exports={container:"common_container__seYK4",wrapCenter:"common_wrapCenter__2WDKE",form:"common_form__2Qchh",title:"common_title__1CsDV",button:"common_button__2HgCs",question:"common_question__lOmQ9",link:"common_link__2bwt_",error:"common_error__2wD2J"}},96:function(e,t,n){e.exports={element:"burger-constructor-element_element__3xJw4",element_fullwidth:"burger-constructor-element_element_fullwidth__357JV"}},97:function(e,t,n){e.exports={preloader:"preloader_preloader__16lUt",preloader_circle:"preloader_preloader_circle__1bfiA",spin:"preloader_spin__IM9Nd"}}},[[217,1,2]]]);
//# sourceMappingURL=main.3ad5fb0a.chunk.js.map